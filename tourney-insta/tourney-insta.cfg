//----------------------------------------
// OSP Tourney server - Insta-gib config
//----------------------------------------
//
// Created by: .cse
// Last modified: 21 Oct 2025, by .cse

set hostname "OZ Quake II - OSP Tourney Insta-gib"
//set port 27930		// Set via command line
set dmflags 11531		// 0010 1101 0000 1011
set public 0			// server publicises IP to master servers below
setmaster ""			// master.q2servers.com
set allow_download 1
set deathmatch 1
set logfile 3
set cheats 0
set log_stats 0
set maxclients 18 // includes the 1 reserved admin spot

set fraglimit 30
set timelimit 10

//----------------------------------------
// Custom variables
//----------------------------------------
set location "Sydney, Australia" s
set admins ".cse" s
//set hostinfo "cse..." s
//set website "cse..." s
//set contact "cse@..." s

//----------------------------------------
// General settings
//----------------------------------------

set allow_download_players "1"
set allow_download_models "1"
set allow_download_sounds "1"
set allow_download_maps "1"
set sv_locked 0
set sv_restartmap "q2dm1"
set sv_filter_q3names 0
set sv_filter_userinfo 0
set sv_filter_stringcmds 1
set sv_blackholes 1
set sv_allownodelta 1
set sv_deny_q2ace 1
set sv_iplimit 3
set sv_nc_visibilitycheck 1
set sv_nc_clientsonly 1
set sv_max_download_size 8388608
set sv_max_netdrop 20
set sv_hidestatus 0
set sv_hideplayers 0
set sv_fpsflood 200
set sv_randomframe 0
set sv_gamedebug 0
set sv_msecs 1800
set sv_recycle 0
set sv_nc_kick 0
set sv_nc_announce 0
set sv_filter_nocheat_spam 1
set sv_uptime 1
set sv_strafejump_hack 3
set sv_reserved_slots 1
set sv_allow_map 1
set sv_allow_unconnected_cmds 0
set sv_strict_userinfo_check 1
set sv_calcpings_method 1
set sv_no_game_serverinfo 0
set sv_max_traces_per_frame 10000
set sv_ratelimit_status 15
set sv_new_entflags 1
set sv_validate_playerskins 1
set sv_idlekick 0
set sv_packetentities_hack 2
set logfile_timestamp 1
set logfile_name "qconsole.log"
set sv_force_reconnect ""
set sv_download_refuselimit 0
set sv_download_drop_file ""
set sv_download_drop_message "This mod requires client-side files, please visit the mod homepage to download them"
set sv_blackhole_mask 32
set con_filterlevel 0
set logfile_filterlevel 0
set sv_badcvarcheck 1
set sv_rcon_buffsize 1384
set sv_rcon_showoutput 1
set sv_show_name_changes 1
set sv_optimize_deltas 1
set sv_lag_stats 0
set sv_max_packetdup 5
set sv_redirect_address ""
set sv_func_entities_hack 1
set fs_cache 0
set sv_advanced_deltas 0
set sv_downloadserver ""
set sv_enforcetime 1
set sv_enhanced_setplayer 1
set sv_entity_inuse_hack 1
set sv_predict_on_lag 0
set sv_cheaternet 720
set sv_cheaternet_action 2
set sv_disallow_download_sprites_hack 1
set sv_disconnect_hack 1
set sv_interpolated_pmove 0
set net_ignoreicmp 0
set sv_downloadserver "http://q2http.tastyspleen.net/"

//----------------------------------------
// R1Q2 anticheat settings
//----------------------------------------
set sv_anticheat_required 1 // 0=disabled, 1=optional, 2=forced
set sv_anticheat_error_action 0 //0=connect w/o anticheat if ac unavailable. 1=disallow all new connections
set sv_anticheat_message "You need anticheat to connect to this server. Visit http://antiche.at/ for more details"
set sv_anticheat_badfile_action 1 // 0=kick, 1=notify player, 2=broadcast
set sv_anticheat_badfile_message ""
set sv_anticheat_badfile_max 0 // 0=no limit
//set sv_anticheat_nag_time 6 // seconds to show nag message for non-ac clients
//set sv_anticheat_nag_message "********************\nWe encourage you to use ANTICHEAT. Visit http://antiche.at/ for more details\n********************"
//set sv_anticheat_nag_defer 3 // seconds to wait after the player has joined server before showing the nag message.
set sv_anticheat_show_violation_reason 1
set sv_anticheat_client_disconnect_action 0 // 0=invalidate, 1=kick
set sv_anticheat_disable_play 1 // disable play client side play command
addnullcmd play // not sure if this is needed when sv_anticheat_disable_play is enabled but use anyway just in case

// wallfly anticheat exceptions
addacexception 74.53.34.226
addacexception 74.52.170.50
addacexception 74.86.102.74

//----------------------------------------
// cvarbans
//----------------------------------------
// commented items apparently dont work as some servers force these variables somehow
//addcvarban frkq2_speed 		* blackhole 	Kicked and logged for using FRKQ2!
//addcvarban frkq2_wallhack 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_waveecho 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_radar 		* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_nose			* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_glow 		* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_fovfilter 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_bot 			* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_antikick 	* blackhole	Kicked and logged for using FRKQ2!
addcvarban _antibot_desconnect 	* LOG
addcvarban _antibot_precache 	* LOG

// Stuff in TS cfg which i'm not sure about but may be needed with wallfly?
sv !msec_max 12000
sv !msec_kick_on_bad 0
sv !say_person_enable Yes
sv !chatbanning_enable Yes

// q2admin settings for q2admin v1.17.52 (from q2admin.net)
//set q2adminbanremotetxt_enable "0"
//set q2adminanticheat_enable "0"
//set q2adminhashlist_enable "0"

// ####################################
//      SERVER-SPECIFIC PARAMETERS
// ####################################
set camera_depth 60.0
set camera_pitch 15.0
set numgibs 0
set nextlevel_click 5.0
set nextlevel_default 6.0
set allow_id 3
set respawn_delay 0
set referee_enable 1
set ffa_hurtself 1
set motd_file "motd/motd-insta.txt"
set fast_respawn 1.0
set fast_minpbound 1
set fast_maxpbound 20
set flood_msgs 5
set flood_persecond 4
set flood_waitdelay 10
set player_ban 0
set player_file "players.txt"
set bots_autoload 0
set bots_botfile "botcfg/bots-insta.cfg"
set bots_minplayers 4
set bots_noclients 0
set bots_warmuptime 0


// ########################################
//      VARIOUS CLIENT CONTROL SETTINGS
// ########################################
set client_botdetect 1
set client_deathweapdrop 0
set client_fastweap 1
set client_highscores 1
set client_hud 0
set client_maxrate 0
set client_maxfps 0
set client_minping 0
set client_maxping 0
set client_nomove 90
set client_protect 0
set client_recover 1


// ############################
//      LOGGING PARAMETERS
// ############################
set nglog_logstyle 0
set nglog_logname "tourney/logs/ngLog/ng-insta.log"
set nglog_flush 2
set nglog_buffer 5
set nglog_logchat 1
set nglog_logallpickups 0
set nglog_worldstats 0
set nglog_ngstats_exec 0
set nglog_ngstats_browser 0
//set nglog_ngstats_cfg "ngStatsQ2T.cfg"
set nglog_ngstats_logdir "logs"
set nglog_ngstats_vidrestart 0

set sl_log_method 1
set sl_filename "tourney/logs/stdlog/frags-insta.log"
set sl_log_style 0
set sl_log_flush 2
set sl_log_logbots 0


// ##################################
//         MATCH Parameters
// ##################################
set match_mode 0
set match_latejoin 2
set match_prestartpercent 80
set match_readypercent 100
set match_countdown 10
set match_countinfo 1
set match_timeouts 2
set match_pausetime 60.0
set match_startsound 1
set match_strictmode 0
//set match_endinfo "Hope you had fun...cya next time :)"
set warmup_health 200
set warmup_armor 200


// ###################################
//        QUALIFIER Parameters
// ###################################
set qualifier_forceskins 1
set qualifier_skinname "male/grunt"
set qualifier_numspots 3


// #################################
//      TEAMPLAY/1v1 Parameters
// #################################
set team_a_name "Girlz"
set team_a_skin "female/brianna"
set team_a_hookcolor "0xd1d1d1d1"
set team_b_name "Guyz"
set team_b_skin "male/sniper"
set team_b_hookcolor "0xf2f2f2f2"
set team_maxplayers 6
set team_hurtteam 1
set team_hurtself 1
set team_overtime_mode 2				// 1=sudden death
set team_overtime_time 2				// 2mins overtime
set team_lockskin 1					// EXPLOIT WORKAROUND: MUST BE SET TO 1
set team_idteam 1
set team_duelrecover 1
set team_recovertime 120


// ################
//      VOTING
// ################
set vote_enable 1
set vote_enable_map 1
set vote_enable_time 0
set vote_enable_frag 0
set vote_enable_hook 1
set vote_enable_toggles 0
set vote_enable_bots 1
set vote_enable_config 0
set vote_enable_runes 0
set vote_enable_kick 1
set vote_bots_max 4
set vote_config_default 0
set vote_config_defaultname "none"
set vote_config_list "serverconfigs.txt"
set vote_time 30
set vote_threshold 20
set vote_carryover 0
set menu_maxtime 120
set menu_timestep 5
set menu_maxfrag 100
set menu_fragstep 5


// ##############
//      HOOK
// ##############
set hook_enable 1
set hook_color "0xd1d1d1d1"
set hook_speed 1650
set hook_pullspeed 975
set hook_initdamage 10
set hook_incdamage 1
set hook_maxdamage 30
set hook_holdtime 7.5
set hook_sky 1
set hook_wait 0.5


// ########################
//      DEMO RECORDING
// ########################
set demo_referee 0
set demo_player 0
set demo_tag "raildm_test"


// ############
//     RUNES
// ############
set runes_enable 0
set runes_flash 1
set runes_perplayer 0.6
set runes_min 3
set runes_max 12
set runes_resist 2.0
set runes_strength 2.0
set runes_regen_hmax 200
set runes_regen_amax 100
set runes_vampire 0.5
set runes_vampire_max 200


// ######################
//      MAP ROTATION
// ######################
set map_file "mapcfg/maps-insta.txt"
set map_queue 1
set map_random 1
set map_once 1
set map_halt 0
set map_nocount 0


// ##############################
//      ITEM/WEAPON HANDLING
// ##############################
set allow_shotgun 0
set allow_supershotgun 0
set allow_machinegun 0
set allow_chaingun 0
set allow_grenadelauncher 0
set allow_rocketlauncher 0
set allow_hyperblaster 0
set allow_railgun 0
set allow_bfg 0
set allow_ammo_cells 0
set allow_ammo_grenades 0
set allow_item_powerscreen 0
set allow_item_powershield 0
set allow_item_quad 0
set allow_item_invul 0
set allow_item_pack 0

set damage_railgun 1000
set power_armor_screen 1.0
set power_armor_shield 2.0


// #############################
//      CLIENT WEAPON INITS
// #############################
set weapon_initial 256
set weapon_have 256

set start_shells 0
set start_bullets 0
set start_cells 0
set start_grenades 0
set start_rockets 0
set start_slugs 50
set start_health 100
set start_armor 0
set start_armortype 0

set max_shells 100
set max_bullets 200
set max_cells 200
set max_grenades 50
set max_rockets 50
set max_slugs 50
set max_health 100

set pack_shells 200
set pack_bullets 300
set pack_cells 300
set pack_grenades 100
set pack_rockets 100
set pack_slugs 100
set pack_health 100


// Need to specify a starting map
map q2dm1
