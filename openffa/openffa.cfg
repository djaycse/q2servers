//----------------------------------------
// OpenFFA server config
//----------------------------------------
//
// Created by: .cse
// Last modified: 21 Oct 2025, by .cse

set hostname "OZ Quake II - OpenFFA DM"
set public 0			// server publicises IP to master servers below
setmaster ""			// master.q2servers.com
set deathmatch 1
set cheats 0
set log_stats 0
set maxclients 18 // includes the 1 reserved admin spot
set dmflags 17428		// 0100 0100 0001 0100
set fraglimit 30
set timelimit 10

//----------------------------------------
// Custom variables
//----------------------------------------
set location "Sydney, Australia" s
set admins ".cse" s
//set hostinfo "cse..." s
//set website "cse..." s
//set contact "cse@..." s

//----------------------------------------
// Q2PRO settings
//----------------------------------------
//set net_ip                    "127.0.0.1"
//set net_port                  "27910"			// Set via command line
set sv_reserved_slots           "2"
set sv_downloadserver           "http://packetflinger.com/dl/q2/" // Thanks to Claire/packetflinger.com!
set sv_uptime                   "2"             // Verbose format
set sv_enhanced_setplayer       "1"             // Partial client name matching for certain console commands like ‘kick’ and ‘stuff’
set allow_download              "1"
set allow_download_maps         "2"             // Maps from within paks too
set sv_mvd_enable               "2"             // Record and transmit to GTV
set logfile                     "2"             // Append to log file

//----------------------------------------
// OpenFFA mod settings
//----------------------------------------
set g_vote_time 30
set g_intermission_time 8
set g_teleporter_nofreeze 1
set g_idle_time 0
set g_bugs 0
set g_vote_mask 48 // 16=mute player + 32=change map
set g_maps_file "maplist" // file is mapcfg\maplist.txt
set g_maps_random 2
set g_spawn_mode 1

//----------------------------------------
// General settings
//----------------------------------------
set sv_locked 0
set sv_restartmap "q2dm1"
set sv_filter_q3names 0
set sv_filter_userinfo 0
set sv_filter_stringcmds 1
set sv_blackholes 1
set sv_allownodelta 1
set sv_deny_q2ace 1
set sv_iplimit 3
set sv_nc_visibilitycheck 1
set sv_nc_clientsonly 1
set sv_max_download_size 8388608
set sv_max_netdrop 20
set sv_hidestatus 0
set sv_hideplayers 0
set sv_fpsflood 200
set sv_randomframe 0
set sv_gamedebug 0
set sv_msecs 1800
set sv_recycle 0
set sv_nc_kick 0
set sv_nc_announce 0
set sv_filter_nocheat_spam 1
set sv_uptime 1
set sv_strafejump_hack 3
set sv_reserved_slots 1
set sv_allow_map 1
set sv_allow_unconnected_cmds 0
set sv_strict_userinfo_check 1
set sv_calcpings_method 1
set sv_no_game_serverinfo 0
set sv_max_traces_per_frame 10000
set sv_ratelimit_status 15
set sv_new_entflags 1
set sv_validate_playerskins 1
set sv_idlekick 0
set sv_packetentities_hack 2
set logfile_timestamp 1
set logfile_name "qconsole.log"
set sv_force_reconnect ""
set sv_download_refuselimit 0
set sv_download_drop_file ""
set sv_download_drop_message "This mod requires client-side files, please visit the mod homepage to download them"
set sv_blackhole_mask 32
set con_filterlevel 0
set logfile_filterlevel 0
set sv_badcvarcheck 1
set sv_rcon_buffsize 1384
set sv_rcon_showoutput 1
set sv_show_name_changes 1
set sv_optimize_deltas 1
set sv_lag_stats 0
set sv_max_packetdup 5
set sv_redirect_address ""
set sv_func_entities_hack 1
set fs_cache 0
set sv_advanced_deltas 0
set sv_downloadserver ""
set sv_enforcetime 1
set sv_enhanced_setplayer 1
set sv_entity_inuse_hack 1
set sv_predict_on_lag 0
set sv_cheaternet 720
set sv_cheaternet_action 2
set sv_disallow_download_sprites_hack 1
set sv_disconnect_hack 1
set sv_interpolated_pmove 0
set net_ignoreicmp 0

//----------------------------------------
// R1Q2 anticheat settings
//----------------------------------------
set sv_anticheat_badfile_max 0
set sv_anticheat_badfile_message ""
set sv_anticheat_badfile_action 2
set sv_anticheat_message "You need anticheat to connect to this server. Visit http://antiche.at/ for more details"
set sv_anticheat_error_action 0
set sv_anticheat_required 0
set sv_anticheat_nag_time 3
set sv_anticheat_nag_defer 3
set sv_anticheat_nag_message "We encourage you to use Anticheat! Visit http://antiche.at/ for more details"
set sv_anticheat_show_violation_reason 1
set sv_anticheat_client_disconnect_action 0
set sv_anticheat_disable_play 0
set sv_anticheat_force_protocol35 1

// wallfly anticheat exceptions
addacexception 74.53.34.226
addacexception 74.52.170.50
addacexception 74.86.102.74

//----------------------------------------
// cvarbans
//----------------------------------------
// commented items apparently dont work as some servers force these variables somehow
//addcvarban frkq2_speed 		* blackhole 	Kicked and logged for using FRKQ2!
//addcvarban frkq2_wallhack 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_waveecho 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_radar 		* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_nose			* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_glow 		* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_fovfilter 	* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_bot 			* blackhole	Kicked and logged for using FRKQ2!
//addcvarban frkq2_antikick 	* blackhole	Kicked and logged for using FRKQ2!
addcvarban _antibot_desconnect 	* LOG
addcvarban _antibot_precache 	* LOG

// Stuff in TS cfg which i'm not sure about but may be needed with wallfly?
sv !msec_max 12000
sv !msec_kick_on_bad 0
sv !say_person_enable Yes
sv !chatbanning_enable Yes

// q2admin settings for q2admin v1.17.52 (from q2admin.net)
//set q2adminbanremotetxt_enable "0"
//set q2adminanticheat_enable "0"
//set q2adminhashlist_enable "0"

//map q2dm1  //discourage calling of map via cfg. Use "+map q2dm1" in the server command line instead if required
